<div class="modal-overlay" (click)="cerrarModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h3>Nuevo Chat</h3>
      <button
        type="button"
        class="btn-cerrar"
        (click)="cerrarModal()"
        aria-label="Cerrar modal">
        &times;
      </button>
    </div>

    <div class="modal-body">
      @if (errorMensaje()) {
        <div class="alert alert-error" role="alert">
          {{ errorMensaje() }}
        </div>
      }

      <div class="form-group">
        <label for="phoneInput">Número de usuario</label>
        <input
          #phoneInput
          type="tel"
          id="phoneInput"
          class="form-control"
          [(ngModel)]="numeroUsuario"
          placeholder="Ingrese el número de usuario"
          aria-describedby="phoneHelp"
          autocomplete="tel">
      </div>

      <div class="form-group">
        <label for="tipoSelect">Tipo de caso</label>
        <select
          id="tipoSelect"
          class="form-control"
          [(ngModel)]="tipoSeleccionado"
          aria-describedby="tipoHelp">
          <option [ngValue]="null" disabled>Seleccione un tipo</option>
          @for (tipo of tiposCaso; track tipo.id || tipo.nombre) {
            <option [ngValue]="tipo">
              {{ tipo.nombre }}
            </option>
          }
        </select>
      </div>
    </div>

    <div class="modal-footer">
      <button
        type="button"
        class="btn-cancelar"
        (click)="cerrarModal()">
        Cancelar
      </button>
      <button
        type="button"
        class="btn-empezar"
        (click)="empezarChat()"
        [disabled]="!numeroUsuario.trim() || !tipoSeleccionado">
        Empezar Chat
      </button>
    </div>
  </div>
</div>
